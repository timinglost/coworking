{% load static %}
{% include 'mainapp/includes/inc_yandex_map.html' %}
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>
<script>
$(document).ready(() => {

    const initialStart = moment().startOf('day');
    const initialEnd = moment().startOf('day').add(8, 'day');

    const onDateSelected = (start, end, label) => {
        $('#date-from').val(start.format('DD/MM/YYYY'));
        $('#date-to').val(end.format('DD/MM/YYYY'));
    };

    onDateSelected(initialStart, initialEnd);

    $('#date-range').daterangepicker({
        opens: 'left',
        minDate: moment().startOf('day'),
        startDate: initialStart,
        endDate: initialEnd,
         locale: {
          format: 'DD/MM/YYYY'
        }
    }, onDateSelected);
});



</script>

<script src="{% static 'mainapp/assets/js/ymaps_init_script.js' %}" type="text/javascript"></script>
<section id="Search" class="search bg-blue search_test">
    <div class="search_overlay"></div>
    <div class="container">
        <div class="main-block">
            <h1 class="text-uppercase text-white">
                Бронируем офисы для работы
            </h1>
            <h3 class="text-white">Найдите свой вариант для комфортной работы</h3>
            <form class=""
                  method="GET"
                  action="{% url 'main' %}"
                  novalidate>
                <div class="main-search-block">
                    <div class="col-md-12">
                        <div class="form-floating">
                            {{ form.city }}
                            <label for="suggest">Город или адрес</label>
                            {% if "city" in form.errors %}
                            <div class="alert alert-danger">
                                <strong>{{ form.errors.city }}</strong>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-floating">
                            {{ form.date }}
                            <label for="date-range">Даты</label>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <button type="submit" class="btn btn-primary">Найти</button>
                    </div>
                </div>
                {{ form.date_from }}
                {{ form.date_to }}
            </form>
        </div>
</section>